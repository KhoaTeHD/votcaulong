!function(e){e.fn.createFilter=function(t){const i=e.extend({buttonSelector:".btn-filter",itemSelector:".product-item",activeClass:"active",hiddenClass:"hidden",allFilterValue:"all"},t);return this.each(function(){const t=e(this),a=t.find(i.buttonSelector),n=t.find(i.itemSelector);a.on("click",function(t){t.preventDefault();const s=e(this).data("filter");a.removeClass(i.activeClass),e(this).addClass(i.activeClass),n.each(function(){const t=e(this).data("category");s===i.allFilterValue||t.includes(s)?e(this).removeClass(i.hiddenClass):e(this).addClass(i.hiddenClass)})})})},e.fn.createProductSlider=function(t){return this.each(function(){const i=e(this),a=i.find(".slider-track");let n=a.find(".slide:not(.hidden)"),s=n.length;const l=e.extend({visibleSlides:parseInt(i.data("visible-slides"),10)||5,gap:parseInt(i.data("gap"),10)||15,autoSlide:!0,autoSlideInterval:3e3},t),{visibleSlides:d,gap:o,autoSlide:r,autoSlideInterval:c}=l,p=(i.width()-(d-1)*o)/d;let u=d;if(s<=d)return i.find(".next, .prev").hide(),a.css("gap",`${o}px`),n.css({width:`${p}px`,flex:`0 0 ${p}px`}),i.data("autoSlideTimer")&&(clearInterval(i.data("autoSlideTimer")),i.removeData("autoSlideTimer")),void i.data("autoSlideEnabled",!1);i.find(".next, .prev").show(),a.find(".clone").remove();for(let e=0;e<d;e++)a.prepend(n.eq(s-1-e).clone().addClass("clone")),a.append(n.eq(e).clone().addClass("clone"));function f(e){i.find(".next, .prev").prop("disabled",!0),a.css("transition","transform 0.5s ease-in-out"),a.css("transform",`translateX(-${e*(p+o)}px)`),u=e,a.one("transitionend",function(){i.find(".next, .prev").prop("disabled",!1),u>=s-d?(a.css("transition","none"),u=d,a.css("transform",`translateX(-${u*(p+o)}px)`)):u<d&&(a.css("transition","none"),u=s-2*d,a.css("transform",`translateX(-${u*(p+o)}px)`))})}if(n=a.find(".slide"),s=n.length,n.css({width:`${p}px`,flex:`0 0 ${p}px`}),a.css({gap:`${o}px`,transform:`translateX(-${u*(p+o)}px)`}),i.find(".next").off("click").on("click",function(){f(u+1)}),i.find(".prev").off("click").on("click",function(){f(u-1)}),i.data("autoSlideTimer")&&(clearInterval(i.data("autoSlideTimer")),i.removeData("autoSlideTimer")),r&&s>d){const e=setInterval(()=>{f(u+1)},c);i.data("autoSlideTimer",e),i.data("autoSlideEnabled",!0),i.hover(function(){i.data("autoSlideTimer")&&(clearInterval(i.data("autoSlideTimer")),i.removeData("autoSlideTimer"))},function(){if(i.data("autoSlideEnabled")&&s>d&&!i.data("autoSlideTimer")){const e=setInterval(()=>{f(u+1)},c);i.data("autoSlideTimer",e)}})}else i.data("autoSlideEnabled",!1)})},e.fn.initSwiperWithFilter=function(t={}){return this.each(function(){const i=e(this),a=i.find(".swiper"),n=i.find(".swiper-filter"),s=i.find(".swiper-pagination"),l=a.data("pagination"),d=parseInt(a.data("pagination-space"),10)||20;if(!a.length)return void console.error("Không tìm thấy slider container!");s.length&&l&&a.css({"padding-bottom":d+"px"});const o=e.extend({visibleSlides:parseInt(a.data("visible-slides"),10)||5,gap:parseInt(a.data("gap"),10)||15,autoSlide:a.data("auto-slide"),pagination:a.data("pagination"),autoSlideInterval:parseInt(a.data("auto-slide-interval"),10)||4e3},t),r=new Swiper(a[0],{slidesPerView:o.visibleSlides,spaceBetween:o.gap,navigation:{nextEl:a.find(".swiper-button-next")[0],prevEl:a.find(".swiper-button-prev")[0]},pagination:!!o.pagination&&{el:a.find(".swiper-pagination")[0],clickable:!0},autoplay:!!o.autoSlide&&{delay:o.autoSlideInterval,disableOnInteraction:!1},grabCursor:!0,breakpoints:{320:{slidesPerView:2,spaceBetween:5},768:{slidesPerView:3,spaceBetween:o.gap},1024:{slidesPerView:o.visibleSlides,spaceBetween:o.gap}}});a.find(".swiper-slide").addClass("swiper-slide-visible").show(),n.length&&n.on("click",".btn-filter",function(t){t.preventDefault();const i=e(this).data("filter");n.find(".btn-filter").removeClass("active"),e(this).addClass("active"),a.find(".swiper-slide").each(function(){const t=e(this),a=t.data("category");"all"===i||a===i?t.show().addClass("swiper-slide-visible"):t.hide().removeClass("swiper-slide-visible")}),r.update(),r.autoplay.stop(),r.autoplay.start()})})},e.fn.filterableList=function(){return this.each(function(){const t=e(this),i=t.find(".filter-input"),a=t.find(".filter-item"),n=e('<div class="empty-message text-muted"></div>').hide(),s=parseInt(i.data("debounce"),10)||300,l=!0===i.data("case-sensitive")||"true"===i.data("case-sensitive"),d=i.data("empty-message")||"No matching items found.";let o;t.append(n.text(d)),i.on("input",function(){clearTimeout(o),o=setTimeout(()=>{const t=l?e(this).val():e(this).val().toLowerCase();let i=!1;a.each(function(){const a=(l?e(this).text():e(this).text().toLowerCase()).includes(t);e(this).toggle(a),a&&(i=!0)}),i?n.hide():n.show()},s)})})}}(jQuery);